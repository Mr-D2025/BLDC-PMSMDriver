# BLDC驱动学习三步走

## 🎯 核心目标
1. 分析开源方案
2. 自己画板子
3. 移植并学习更多先进代码

---

## 📌 第一步：分析开源设计

### 做什么
1. **找资料**
   - 下载逐飞开源BLDC原理图、PCB、代码
   - 找STC和STM32的数据手册

2. **看硬件**
   - 电机怎么接（三相线）
   - 单片机怎么控制MOS管
   - 怎么检测电流
   - 电源怎么设计

3. **看软件**
   - 代码目录结构
   - 主要功能文件
   - 控制流程（怎么启动、怎么换相）

---

## 📌 第二步：自己设计硬件

### 核心任务
**画一块STM32的BLDC驱动板**
**搭建一个电机实验平台**
### 关键模块
1. **主芯片**：STM32F407或G474
2. **电机驱动**：6个MOS管 + 3个驱动芯片
3. **电流检测**：采样电阻 + 运放
4. **电源**：12V转3.3V给单片机
5. **保护**：过流保护电路

### 简单流程
1. 用立创EDA画原理图
2. 布局布线（功率线要粗）
3. 打样焊接
4. 基础测试（电源、PWM）
5. solidworks设计一个保护罩与光电测速模块，并3D打印出来
---

## 📌 第三步：软件移植与学习

### 阶段1：移植逐飞代码
1. **搭环境**
   - STM32CubeMX建工程
   - 配置PWM、ADC、定时器

2. **改代码**
   - 把STC的寄存器操作改成STM32的HAL库
   - 保持算法逻辑不变
   - 先实现六步换相控制

3. **测试**
   - 能转起来就行
   - 慢慢调参数

### 阶段2：学习FOC
1. **先理解概念**
   - Clarke变换、Park变换是什么
   - SVPWM是什么

2. **找现成库参考**
   - SimpleFOC开源库
   - ST的电机库

3. **尝试实现**
   - 先做有感FOC（有霍尔/编码器）
   - 再做无感FOC

---


